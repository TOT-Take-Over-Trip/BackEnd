# âœˆï¸ TOT

> **ë¦¬ë·°ë¥¼ ë“±ë¡í•˜ê³  ì½”ìŠ¤ë¥¼ ì¸ìˆ˜í•˜ì„¸ìš”!**
> 

# ğŸ§‘ğŸ»â€ğŸ’» í”„ë¡œì íŠ¸ ë° ë©¤ë²„

> ê¸°ê°„: 2024.5.16 ~ 2024.5.23
> 

> ë©¤ë²„ êµ¬ì„±: 2ëª…(Back-end & Front-end)
> 

## í”„ë¡œì íŠ¸ ì†Œê°œ

ì—¬í–‰ ì •ë³´ í”Œë«í¼ **TOT(Take Over Trip)ì€** ì‚¬ìš©ìë“¤ì´ ì‘ì„±í•œ ì—¬í–‰ì½”ìŠ¤ì™€ ë¦¬ë·°ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê¸€ì„ ì‘ì„±í•˜ì—¬ í¬ì¸íŠ¸ë¥¼ íšë“í•˜ê³ , ë§ˆìŒì— ë“œëŠ” ì½”ìŠ¤ê°€ ìˆë‹¤ë©´ ì½”ìŠ¤ë¥¼ ì¸ìˆ˜í•˜ì—¬ ë” ë§ì€ í¬ì¸íŠ¸ë¥¼ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

- ì—¬í–‰, ë§›ì§‘ë“± ë¦¬ë·°ë¥¼ ì‘ì„±í•˜ì—¬ ì¡°íšŒìˆ˜ì™€ ì¢‹ì•„ìš”ë¥¼ ì–»ì–´ë³´ì•„ìš”!
- ì§€ë„ë¥¼ í™œìš©í•˜ì—¬ ì—¬í–‰ì½”ìŠ¤ë¥¼ ë“±ë¡í•˜ê³   ì¡°íšŒìˆ˜ì™€ ì¢‹ì•„ìš”ë¥¼ ì–»ì–´ë³´ì•„ìš”!
- ë§ˆìŒì— ë“œëŠ” ì½”ìŠ¤ê°€ ìˆë‹¤ë©´, ì½”ìŠ¤ë¥¼ ì¸ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ë¬¼ë¡  ë‚˜ì˜ ì½”ìŠ¤ë„ ì¸ìˆ˜ë‹¹í•  ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤!
- ë§¤ì¼ ìì‹ ì´ ì‘ì„±í•œ ë¦¬ë·°, ê°€ì§€ê³  ìˆëŠ” ì½”ìŠ¤ì˜ ì¡°íšŒìˆ˜, ì¢‹ì•„ìš” ê°œìˆ˜ì— ë”°ë¼ í¬ì¸íŠ¸ë¥¼ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!
- ì´ë¥¼ í†µí•´ íšë“í•œ í¬ì¸íŠ¸ëŠ” ìƒí’ˆìœ¼ë¡œ êµí™˜í•  ìˆ˜ ìˆì–´ìš”.

> **[ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)**
> 
> **[ì„œë¹„ìŠ¤ ì‹œì—°ì˜ìƒ](#ì„œë¹„ìŠ¤-ì‹œì—°-ì˜ìƒ)**
> 
> **[Trouble Shooting ë‚´ì—­](#trouble-shooting)**
> 
---

## ê¸°ìˆ  ìŠ¤íƒ

### Frontend
<div>
<img src="https://img.shields.io/badge/Vue.js-4FC08D?style=flat-square&logo=Vue.js&logoColor=white"/>
<img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=flat-square&logo=javascript&logoColor=black"/>
<img src="https://img.shields.io/badge/Tailwind CSS-06B6D4?style=flat-square&logo=Tailwind CSS&logoColor=white"/>
</div>

### Backend
![Java](https://img.shields.io/badge/java-007396?style=for-the-badge&logo=java&logoColor=white)
![Spring Boot](https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white)
<img src="https://img.shields.io/badge/MyBatis-000000?style=for-the-badge&logo=MyBatis&logoColor=white"> 
<img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=Redis&logoColor=white"> 
![MySQL](https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white)

### í˜‘ì—… íˆ´
![Git](https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white)
![Notion](https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white)

---

## ERD

<img width="1187" alt="erd" src="https://github.com/TOT-Take-Over-Trip/BackEnd/assets/75566606/eb4be423-1d5c-4e4a-bbda-33af3aa9814d">

---

## ì„œë¹„ìŠ¤ ì‹œì—° ì˜ìƒ

<img src="https://github.com/TOT-Take-Over-Trip/BackEnd/assets/75566606/37859fd8-4598-4ca5-811a-45b19a6ed2b1"/>  

<p align="center"> <a href="https://youtu.be/pZl-HfEG6f4?si=88JfUNoFrUAwjAqw" style="font-size:20em;">ì‹œì—°ì˜ìƒ ìœ íŠœë¸Œ ë§í¬</a> </p>

---

## Trouble Shooting

### ì¡°íšŒìˆ˜ ì¦ë³µ ì¦ê°€ ë¬¸ì œ

- **ë¬¸ì œìƒí™©**: ì‚¬ìš©ìê°€ ìƒˆë¡œê³ ì¹¨ì„ í†µí•´ ê°™ì€ ê²Œì‹œê¸€, ì½”ìŠ¤ì— ëŒ€í•´ ì¡°íšŒìˆ˜ë¥¼ ë¬´í•œìœ¼ë¡œ ì¦ê°€ì‹œí‚¬ ìˆ˜ ìˆëŠ” ë¬¸ì œê°€ ë°œìƒ. ì¡°íšŒìˆ˜ ê¸°ë°˜ìœ¼ë¡œ í¬ì¸íŠ¸ë¥¼ ì§€ê¸‰í•˜ê¸° ë•Œë¬¸ì— ì´ëŠ” ë°˜ë“œì‹œ ë§‰ì•„ì•¼í•˜ëŠ” ìƒí™©.
- **í•´ê²°ë°©ì•ˆ**: Redisë¥¼ ì‚¬ìš©í•œ ì¡°íšŒìˆ˜ ì¤‘ë³µë°©ì§€ ë¡œì§ êµ¬í˜„.
- **ê´€ë ¨ì»¤ë°‹**: [https://github.com/TOT-Take-Over-Trip/BackEnd/commit/883105d470e594fc2228ae2324c31e0be280a0c3]

```java
/**
     * ì–´ë–¤ ìœ ì €ê°€ í•´ë‹¹ ì½”ìŠ¤ë¥¼ ì´ë¯¸ ì¡°íšŒí–ˆì„ ê²½ìš° ì¡°íšŒìˆ˜ë¥¼ ë†’ì´ì§€ ì•Šë„ë¡ Redisë¥¼ ì´ìš©í•˜ì—¬ ì¤‘ë³µê²€ì‚¬ ì§„í–‰
     */
    @Override
    public void updateHit(int courseId, int memberId) {
        String memberViewList = redisUtil.getData(String.valueOf(memberId));
        //ì¡°íšŒë˜ëŠ”ê²Œ ì—†ëŠ” ê²½ìš° ì˜ˆì™¸ì²˜ë¦¬í›„ redis ì €ì¥ ë° ì¡°íšŒìˆ˜ ì¦ê°€
        if (memberViewList == null) {
            //valueê°’ êµ¬ë¶„ì„ ìœ„í•´ - ë„£ì–´ì£¼ê¸°
            redisUtil.setDateExpire(String.valueOf(memberId), courseId + "-",
                calculateTimeUntilMidnight());
            courseMapper.updateHit(courseId);
            return;
        }

        String[] redisValueArray = memberViewList.split("-");   //í•´ë‹¹ memberê°€ ì´ë¯¸ ì¡°íšŒí•œ courseIdëª©ë¡
        boolean isView = false; //memberê°€ í•´ë‹¹ì½”ìŠ¤ë¥¼ ì˜¤ëŠ˜ ì¡°íšŒí–ˆëŠ”ì§€
        for (int i = 0; i < redisValueArray.length; i++) {
            if(redisValueArray[i].equals(String.valueOf(courseId))){
                isView = true;
                break;
            }
        }
        if(!isView){
            redisUtil.setDateExpire(String.valueOf(memberId), memberViewList+courseId + "-",
                calculateTimeUntilMidnight());
            courseMapper.updateHit(courseId);
        }
    }

    //ìì •ê¹Œì§€ì˜ ì‹œê°„ ê³„ì‚°
    public static long calculateTimeUntilMidnight() {
        LocalDateTime now = LocalDateTime.now();
        LocalDateTime midnight = now.truncatedTo(ChronoUnit.DAYS).plusDays(1);
        return ChronoUnit.SECONDS.between(now, midnight);
    }
}
```

- â€œ-â€ë¥¼ ì‚¬ìš©í•˜ì—¬ valueê°’ êµ¬ë¶„. ë§Œì•½ ì–´ë–¤ ìœ ì €ê°€ 2,3,4ë²ˆ ì½”ìŠ¤ë¥¼ ì¡°íšŒí–ˆë‹¤ë©´ â€œ2-3-4-â€ í˜•íƒœë¡œ valueê°’ ì €ì¥
- í‚¤(ìœ ì €ID)ë¥¼ í†µí•´ Value(CourseId)ë“¤ì„ ì¡°íšŒí•´ì˜¨ ë’¤ í˜¸ì¶œëœ courseIdì™€ ì¤‘ë³µê²€ì‚¬ë¥¼ ì§„í–‰í•˜ì—¬ ì¡°íšŒí•œì ì´ ì—†ìœ¼ë©´ ì¡°íšŒìˆ˜ ì¦ê°€ì‹œì¼œì£¼ëŠ” ë¡œì§!
- TTL(ë°ì´í„° ìë™ ì‚­ì œ)ì€ ìì •ìœ¼ë¡œ ì„¤ì •

---  
